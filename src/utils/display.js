import chalk from 'chalk';

export const ascii = {
  logo: `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                               â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â•‘
â•‘   â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—  â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•  â•‘
â•‘   â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—  â•‘
â•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘  â•‘
â•‘   â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•   â•šâ•â•   â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•  â•‘
â•‘                                                               â•‘
â•‘           ðŸš€  INTERSTELLAR TRADING COMMAND CENTER  ðŸš€         â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
`,

  ship: `
       ðŸš€
    â•­â”€â”€â”€â”€â”€â•®
   â•± â–° â–° â–° â•²
  â•±â–° â–° â–° â–° â–°â•²
 â•±â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â•²
 â•²â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â–°â•±
  â•²â–° â–° â–° â–° â–°â•±
   â•² â–° â–° â–° â•±
    â•°â”€â”€â”€â”€â”€â•¯
       ðŸ”¥
`,

  planet: `
      ðŸŒ
   â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
  â•±  â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â•²
 â•± â–‘â–‘â–‘â–“â–“â–“â–‘â–‘â–‘â–‘â–‘ â•²
â”‚ â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘ â”‚
â”‚ â–‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘ â”‚
â”‚ â–‘â–‘â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘ â”‚
 â•² â–‘â–‘â–‘â–“â–“â–“â–‘â–‘â–‘â–‘â–‘ â•±
  â•²  â–‘â–‘â–‘â–‘â–‘â–‘â–‘  â•±
   â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
`,

  credits: `
     ðŸ’°
   â•­â”€â”€â”€â”€â”€â•®
  â•±   $   â•²
 â•±  $$$$$  â•²
â”‚ $$$ C $$$â”‚
 â•²  $$$$$  â•±
  â•²   $   â•±
   â•°â”€â”€â”€â”€â”€â•¯
`,

  cargo: `
     ðŸ“¦
   â•­â”€â”€â”€â”€â”€â•®
  â•±â–â–€â–€â–€â–€â–€â–Œâ•²
 â•± â– â–  â–  â–Œ â•²
â”‚  â– â–  â–  â–Œ  â”‚
â”‚  â– â–  â–  â–Œ  â”‚
 â•² â–â–„â–„â–„â–„â–„â–Œ â•±
  â•²â–â–â–â–â–â–â–â•±
   â•°â”€â”€â”€â”€â”€â•¯
`
};

export const icons = {
  // Navigation
  location: 'ðŸ“',
  travel: 'ðŸš€',
  planet: 'ðŸŒ',
  
  // Trading
  market: 'ðŸª',
  buy: 'ðŸ’°',
  sell: 'ðŸ’¸',
  cargo: 'ðŸ“¦',
  credits: 'ðŸ’Ž',
  
  // Game
  stats: 'ðŸ“Š',
  ship: 'ðŸ›¸',
  user: 'ðŸ‘¤',
  turns: 'â±ï¸',
  
  // Actions
  view: 'ðŸ‘ï¸',
  exit: 'ðŸšª',
  login: 'ðŸ”‘',
  create: 'âœ¨',
  back: 'ðŸ”™',
  cancel: 'âŒ',
  
  // Status
  success: 'âœ…',
  error: 'âŒ',
  warning: 'âš ï¸',
  info: 'â„¹ï¸'
};

export const displayTitle = (title, icon = '') => {
  const totalWidth = 65;
  const iconStr = icon ? `${icon} ` : '';
  const titleStr = `${iconStr}${title}`;
  const padding = Math.max(0, totalWidth - titleStr.length - 4);
  const leftPad = Math.floor(padding / 2);
  const rightPad = padding - leftPad;
  
  console.log(chalk.cyan('â•”' + 'â•'.repeat(totalWidth - 2) + 'â•—'));
  console.log(chalk.cyan('â•‘') + ' '.repeat(leftPad) + chalk.bold.white(titleStr) + ' '.repeat(rightPad) + chalk.cyan('â•‘'));
  console.log(chalk.cyan('â•š' + 'â•'.repeat(totalWidth - 2) + 'â•'));
  console.log();
};

export const displayHeader = (user, game) => {
  console.clear();
  console.log(chalk.bold.cyan(ascii.logo));
  
  if (user && game) {
    // Define column widths for pilot info table
    const headerWidth = 64; // Total width of the header box
    const leftCol = 50;     // Left column width
    const rightCol = 12;    // Right column width (total - left - 2 for borders)
    
    console.log(chalk.cyan('â•”' + 'â•'.repeat(headerWidth) + 'â•—'));
    console.log(chalk.cyan('â•‘') + chalk.bold.green(` ${icons.user} Pilot: ${user.username}`.padEnd(leftCol)) + 
                chalk.cyan('â•‘') + chalk.bold.yellow(` ${icons.credits} ${game.credits} Credits`.padEnd(rightCol)) + chalk.cyan('â•‘'));
    console.log(chalk.cyan('â•‘') + chalk.bold.blue(` ${icons.ship} Ship: ${game.ship_name}`.padEnd(leftCol)) + 
                chalk.cyan('â•‘') + chalk.bold.magenta(` ${icons.turns} Turn ${game.turns_used}`.padEnd(rightCol)) + chalk.cyan('â•‘'));
    console.log(chalk.cyan('â•‘') + chalk.bold.white(` ${icons.location} Location: ${game.planet_name}`.padEnd(headerWidth)) + chalk.cyan('â•‘'));
    console.log(chalk.cyan('â•š' + 'â•'.repeat(headerWidth) + 'â•'));
  }
  console.log();
};

export const displayGameStats = (user, game) => {
  console.log(chalk.cyan(ascii.ship));
  console.log(chalk.bold.yellow('ðŸŽ® GAME STATISTICS'));
  console.log(chalk.cyan('â”€'.repeat(40)));
  console.log(chalk.white(`${icons.user} Pilot: `) + chalk.bold.green(user.username));
  console.log(chalk.white(`${icons.ship} Ship: `) + chalk.bold.blue(game.ship_name));
  console.log(chalk.white(`${icons.location} Location: `) + chalk.bold.cyan(game.planet_name));
  console.log(chalk.white(`${icons.credits} Credits: `) + chalk.bold.yellow(game.credits));
  console.log(chalk.white(`${icons.turns} Turns Used: `) + chalk.bold.magenta(game.turns_used));
  console.log(chalk.white(`${icons.cargo} Cargo Capacity: `) + chalk.bold.white(game.cargo_capacity));
};

export const displayMarketTable = (prices, planetName) => {
  displayTitle('GALACTIC MARKET', icons.market);
  console.log(chalk.bold.yellow(`${icons.planet} Current Location: ${planetName}`));
  console.log();
  
  // Define column widths (including space for content + padding)
  const colWidths = {
    commodity: 22,  // 22 chars for commodity name
    buyPrice: 11,   // 11 chars for buy price  
    sellPrice: 11,  // 11 chars for sell price
    stock: 11       // 11 chars for stock
  };
  
  console.log(chalk.cyan('â•”' + 'â•'.repeat(colWidths.commodity) + 'â•¦' + 'â•'.repeat(colWidths.buyPrice) + 'â•¦' + 'â•'.repeat(colWidths.sellPrice) + 'â•¦' + 'â•'.repeat(colWidths.stock) + 'â•—'));
  console.log(chalk.cyan('â•‘') + chalk.bold.white(' Commodity'.padEnd(colWidths.commodity)) + 
              chalk.cyan('â•‘') + chalk.bold.green(' Buy Price'.padEnd(colWidths.buyPrice)) + 
              chalk.cyan('â•‘') + chalk.bold.red(' Sell Price'.padEnd(colWidths.sellPrice)) + 
              chalk.cyan('â•‘') + chalk.bold.blue(' Stock'.padEnd(colWidths.stock)) + chalk.cyan('â•‘'));
  console.log(chalk.cyan('â• ' + 'â•'.repeat(colWidths.commodity) + 'â•¬' + 'â•'.repeat(colWidths.buyPrice) + 'â•¬' + 'â•'.repeat(colWidths.sellPrice) + 'â•¬' + 'â•'.repeat(colWidths.stock) + 'â•£'));
  
  prices.forEach(item => {
    console.log(
      chalk.cyan('â•‘') + chalk.white(` ${item.commodity_name}`.padEnd(colWidths.commodity)) +
      chalk.cyan('â•‘') + chalk.green(` ${item.buy_price}`.padEnd(colWidths.buyPrice)) +
      chalk.cyan('â•‘') + chalk.red(` ${item.sell_price}`.padEnd(colWidths.sellPrice)) +
      chalk.cyan('â•‘') + chalk.blue(` ${item.stock}`.padEnd(colWidths.stock)) + chalk.cyan('â•‘')
    );
  });
  
  console.log(chalk.cyan('â•š' + 'â•'.repeat(colWidths.commodity) + 'â•©' + 'â•'.repeat(colWidths.buyPrice) + 'â•©' + 'â•'.repeat(colWidths.sellPrice) + 'â•©' + 'â•'.repeat(colWidths.stock) + 'â•'));
};

export const displayCargoTable = (cargo, totalCargo, capacity) => {
  displayTitle('CARGO HOLD', icons.cargo);
  console.log(chalk.bold.yellow(`${icons.cargo} Cargo Capacity: ${totalCargo}/${capacity}`));
  console.log();
  
  if (cargo.length === 0) {
    console.log(chalk.cyan(ascii.cargo));
    console.log(chalk.gray('ðŸ“­ Cargo hold is empty.'));
  } else {
    // Define column widths for cargo table
    const colWidths = {
      commodity: 22,  // 22 chars for commodity name
      quantity: 11    // 11 chars for quantity
    };
    
    console.log(chalk.cyan('â•”' + 'â•'.repeat(colWidths.commodity) + 'â•¦' + 'â•'.repeat(colWidths.quantity) + 'â•—'));
    console.log(chalk.cyan('â•‘') + chalk.bold.white(' Commodity'.padEnd(colWidths.commodity)) + 
                chalk.cyan('â•‘') + chalk.bold.yellow(' Quantity'.padEnd(colWidths.quantity)) + chalk.cyan('â•‘'));
    console.log(chalk.cyan('â• ' + 'â•'.repeat(colWidths.commodity) + 'â•¬' + 'â•'.repeat(colWidths.quantity) + 'â•£'));
    
    cargo.forEach(item => {
      console.log(
        chalk.cyan('â•‘') + chalk.white(` ${item.commodity_name}`.padEnd(colWidths.commodity)) +
        chalk.cyan('â•‘') + chalk.yellow(` ${item.quantity}`.padEnd(colWidths.quantity)) + chalk.cyan('â•‘')
      );
    });
    
    console.log(chalk.cyan('â•š' + 'â•'.repeat(colWidths.commodity) + 'â•©' + 'â•'.repeat(colWidths.quantity) + 'â•'));
  }
};

export const displaySuccess = (message) => {
  console.log(chalk.green(`${icons.success} ${message}`));
};

export const displayError = (message) => {
  console.log(chalk.red(`${icons.error} ${message}`));
};

export const displayWarning = (message) => {
  console.log(chalk.yellow(`${icons.warning} ${message}`));
};

export const displayInfo = (message) => {
  console.log(chalk.blue(`${icons.info} ${message}`));
};

export const addBackOption = (choices, backText = 'Back to Main Menu') => {
  return [{ name: `${icons.back} ${backText}`, value: 'BACK' }, ...choices];
};

export const addCancelOption = (choices, cancelText = 'Cancel') => {
  return [{ name: `${icons.cancel} ${cancelText}`, value: 'CANCEL' }, ...choices];
};

export const displayNavigationHelp = () => {
  console.log();
  console.log(chalk.gray(`ðŸ’¡ Navigation: Use arrow keys to select, Enter to confirm, Ctrl+C to exit`));
};